// Countdown Timer
const partyDate = new Date("March 29, 2025 16:00:00").getTime();
const timer = setInterval(() => {
    const now = new Date().getTime();
    const distance = partyDate - now;

    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

    document.getElementById("days").innerText = days;
    document.getElementById("hours").innerText = hours;
    document.getElementById("minutes").innerText = minutes;
    document.getElementById("seconds").innerText = seconds;

    if (distance < 0) {
        clearInterval(timer);
        document.getElementById("timer").innerText = "Party Time!";
    }
}, 1000);

// Balloon Animation
const canvas = document.getElementById("balloon-canvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const balloons = [];
class Balloon {
    constructor() {
        this.x = Math.random() * canvas.width;
        this.y = canvas.height + 50;
        this.radius = Math.random() * 20 + 10;
        this.speed = Math.random() * 2 + 1;
        this.color = `hsl(${Math.random() * 360}, 80%, 50%)`;
    }

    draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
        ctx.fillStyle = this.color;
        ctx.fill();
        ctx.closePath();
    }

    update() {
        this.y -= this.speed;
        if (this.y < -this.radius) this.y = canvas.height + 50;
        this.draw();
    }
}

function animateBalloons() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    balloons.forEach(balloon => balloon.update());
    requestAnimationFrame(animateBalloons);
}

for (let i = 0; i < 20; i++) balloons.push(new Balloon());
animateBalloons();

window.addEventListener("resize", () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});

// Particle.js Configuration
particlesJS("balloon-canvas", {
    particles: {
        number: { value: 50 },
        color: { value: ["#ff4500", "#1e90ff", "#ffd700"] },
        shape: { type: "circle" },
        opacity: { value: 0.8 },
        size: { value: 5, random: true },
        move: { enable: true, speed: 3, direction: "top", out_mode: "out" }
    },
    interactivity: {
        events: { onhover: { enable: true, mode: "repulse" } }
    }
});

// Music Toggle
const audio = document.getElementById("background-music");
const toggleBtn = document.getElementById("music-toggle");
let isPlaying = false;

toggleBtn.addEventListener("click", () => {
    if (isPlaying) {
        audio.pause();
        toggleBtn.innerText = "Play Music";
    } else {
        audio.play();
        toggleBtn.innerText = "Pause Music";
    }
    isPlaying = !isPlaying;
});

// Optional Confetti (uncomment to enable)
// setTimeout(() => {
//     confetti({
//         particleCount: 100,
//         spread: 70,
//         origin: { y: 0.6 }
//     });
// }, 1000);
